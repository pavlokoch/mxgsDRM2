<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<gdml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://service-spi.web.cern.ch/service-spi/app/releases/GDML/schema/gdml.xsd">

  <define>
    <!-- generic definitions. -->
    <position name="orig" x="0" y="0" z="0"/>
    <rotation name="id" x="0" y="0" z="0" />
    <rotation name="z180" unit="deg" z="180"/>
    <rotation name="z90" unit="deg" z="90"/>
    <rotation name="z270" unit="deg" z="270"/>
    <scale name="flipZ" x="1" y="1" z="-1"/>

    <!-- definitions for lower cover: lowCov_... -->
    <constant name="lowCov_b1_wx" value="420"/>
    <constant name="lowCov_b1_wy" value="620"/>
    <constant name="lowCov_b1_wz" value="10"/>
    <constant name="lowCov_t1_x1" value="620"/>
    <constant name="lowCov_t1_x2" value="317"/>
    <constant name="lowCov_t1_y1" value="6"/>
    <constant name="lowCov_t1_y2" value="6"/>
    <constant name="lowCov_t1_z" value="93.4+1.5"/> <!-- +1.5 to match dpubox -->
    <constant name="lowCov_b2_wx" value="75"/>
    <constant name="lowCov_b2_wy" value="317"/>
    <constant name="lowCov_b2_wz" value="6"/>
    <constant name="lowCov_mv_dx" value="(lowCov_b1_wx+lowCov_t1_z+lowCov_b2_wx)/2-lowCov_b1_wx/2"/>
    <position name="lowCov_b1_pos" unit="mm" x="-lowCov_mv_dx" y="0" z="0"/>
    <position name="lowCov_b2_pos" unit="mm" x="lowCov_t1_z + lowCov_b2_wx/2 + lowCov_b1_wx/2 - lowCov_mv_dx" y="0" z="(lowCov_b1_wz-lowCov_b2_wz)/2"/>
    <position name="lowCov_t1_pos" unit="mm" x="lowCov_b1_wx/2 + lowCov_t1_z/2 - lowCov_mv_dx" y="0" z="(lowCov_b1_wz-lowCov_t1_y1)/2"/>
    <rotation name="lowCov_t1_rot" unit="deg" z="90" y="-90"/>
    <position name="lowCov_pos" unit="mm" x="lowCov_mv_dx" y="0" z="0"/>


    <!-- definitions for lower housing: lowHsg_... -->
    <constant name="lowHsg_bxmp_wx" value="5"/>
    <constant name="lowHsg_bxmp_wy" value="620"/>
    <constant name="lowHsg_bxmp_wz" value="50"/>
    <constant name="lowHsg_bymp_wx" value="410"/>
    <constant name="lowHsg_bymp_wy" value="5"/>
    <constant name="lowHsg_bymp_wz" value="50"/>
    <constant name="lowHsg_blid_wx" value="420"/>
    <constant name="lowHsg_blid_wy" value="620"/>
    <constant name="lowHsg_blid_wz" value="5"/>
    <constant name="lowHsg_mv_dz" value="(lowHsg_bxmp_wz)/2"/>
    <position name="lowHsg_bxm_pos" unit="mm" x="-lowHsg_bymp_wx/2-lowHsg_bxmp_wx/2" y="0" z="-lowHsg_bxmp_wz/2-lowHsg_blid_wz/2+lowHsg_mv_dz"/>
    <position name="lowHsg_bxp_pos" unit="mm" x="lowHsg_bymp_wx/2+lowHsg_bxmp_wx/2" y="0" z="-lowHsg_bxmp_wz/2-lowHsg_blid_wz/2+lowHsg_mv_dz"/>
    <position name="lowHsg_bym_pos" unit="mm" x="0" y="-lowHsg_bxmp_wy/2+lowHsg_bymp_wy/2" z="-lowHsg_bxmp_wz/2-lowHsg_blid_wz/2+lowHsg_mv_dz"/>
    <position name="lowHsg_byp_pos" unit="mm" x="0" y="lowHsg_bxmp_wy/2-lowHsg_bymp_wy/2" z="-lowHsg_bxmp_wz/2-lowHsg_blid_wz/2+lowHsg_mv_dz"/>
    <position name="lowHsg_blid_pos" unit="mm" x="0" y="0" z="lowHsg_mv_dz"/>
    <position name="lowHsg_pos" unit="mm" x="0" y="0" z="lowHsg_bxmp_wz+lowCov_b1_wz/2+lowHsg_blid_wz/2-lowHsg_mv_dz"/>

    <!-- definitions for DPU box; dpuBox_... -->
    <constant name="dpuBox_bb_wx" value="77.49"/>
    <constant name="dpuBox_bb_wy" value="158.8*2"/>
    <constant name="dpuBox_bb_wz" value="5"/>
    <constant name="dpuBox_bbck_wx" value="3"/>
    <constant name="dpuBox_bbck_wy" value="158.5*2"/>
    <constant name="dpuBox_bbck_wz" value="140"/>
    <constant name="dpuBox_sbympal_wx" value="153.6"/>
    <constant name="dpuBox_bt_x1" value="5"/>
    <constant name="dpuBox_bt_x2" value="5"/>
    <constant name="dpuBox_bt_y1" value="dpuBox_bb_wy"/>
    <constant name="dpuBox_bt_y2" value="dpuBox_bb_wy + 2*dpuBox_sbympal_wx*sin(53*pi/180)"/>
    <constant name="dpuBox_bt_z" value="169.9-dpuBox_bb_wx"/>
    <constant name="dpuBox_mv_dx" value="dpuBox_bt_z/2"/>
    <constant name="dpuBox_mv_dz" value="dpuBox_bbck_wz/2"/>
    <position name="dpuBox_bb_pos" unit="mm" x="dpuBox_mv_dx" y="0" z="dpuBox_mv_dz"/>
    <position name="dpuBox_pos" unit="mm" x="lowCov_t1_z/2 + lowCov_b2_wx/2 + lowCov_b1_wx/2" y="0" z="lowCov_b1_wz/2+dpuBox_bbck_wz/2+dpuBox_bb_wz/2"/>
    <position name="dpuBox_bt_pos" unit="mm" x="-dpuBox_bb_wx/2-dpuBox_bt_z/2+dpuBox_mv_dx" y="0" z="dpuBox_mv_dz"/>
    <position name="dpuBox_sides_pos" unit="mm" x="dpuBox_mv_dx" y="0" z="dpuBox_mv_dz"/>
    <rotation name="dpuBox_bt_rot" unit="deg" y="90"/>
    <position name="dpuBox_ffmm_pos" unit="mm" x="dpuBox_bb_wx/2+dpuBox_mv_dx" y="-dpuBox_bbck_wy/2" z="-86.5+dpuBox_mv_dz"/>
    <position name="dpuBox_ffpm_pos" unit="mm" x="dpuBox_bb_wx/2+dpuBox_mv_dx" y="dpuBox_bbck_wy/2"  z="-86.5+dpuBox_mv_dz"/>
    <position name="dpuBox_ffmp_pos" unit="mm" x="dpuBox_bb_wx/2+dpuBox_mv_dx" y="-dpuBox_bbck_wy/2" z="-86.5+70+dpuBox_mv_dz"/>
    <position name="dpuBox_ffpp_pos" unit="mm" x="dpuBox_bb_wx/2+dpuBox_mv_dx" y="dpuBox_bbck_wy/2" z="-86.5+70+dpuBox_mv_dz"/>
    <rotation name="dpuBox_ffm_rot" unit="deg" z="-180" y="90"/>
    <rotation name="dpuBox_ffp_rot" unit="deg" z="0" y="90"/>

    <!-- definitions for hopper: hop_... -->
    <!-- box  (mv1) -->
    <constant name="hop_b_wx" value="420"/>
    <constant name="hop_b_wy" value="620"/>
    <constant name="hop_b_hwy" value="544"/>
    <constant name="hop_b_hwz" value="85"/>
    <constant name="hop_b_wz" value="131.8"/>
    <constant name="hop_b_t" value="3"/> <!-- thickness -->
    <constant name="hop_lh_w" value="380"/> <!-- lid hole -->
    <constant name="hop_top_w" value="746"/>
    <constant name="hop_mv1_dz" value="-hop_b_t/2+hop_b_wz/2"/>
    <position name="hop_bxm_pos" unit="mm" x="-hop_b_wx/2+hop_b_t/2" y="0" z="-hop_b_t/2-(hop_b_wz - hop_b_t)/2 + hop_mv1_dz"/>
    <position name="hop_bxp_pos" unit="mm" x="hop_b_wx/2-hop_b_t/2" y="0" z="-hop_b_t/2-(hop_b_wz - hop_b_t)/2 + hop_mv1_dz"/>
    <position name="hop_bym_pos" unit="mm" x="0" y="-hop_b_wy/2+hop_b_t/2" z="-hop_b_t/2-(hop_b_wz - hop_b_t)/2 + hop_mv1_dz"/>
    <position name="hop_byp_pos" unit="mm" x="0" y="+hop_b_wy/2-hop_b_t/2" z="-hop_b_t/2-(hop_b_wz - hop_b_t)/2 + hop_mv1_dz"/>
    <position name="hop_bzp_pos" unit="mm" x="0" y="0" z="hop_mv1_dz"/>
    <position name="hop_b_hdz" x="0" y="0" z="hop_b_hwz/2 - hop_b_wz/2 - hop_b_t/2"/>
    <position name="instrument_pos" unit="mm" x="0" y="0" z="-hop_b_t/2"/>

    <!-- ears (mv2) -->
    <constant name="hop_ang" value="40.32"/>
    <constant name="hop_angr" value="hop_ang*pi/180"/>
    <constant name="hop_angDepth" value="211"/>
    <constant name="hop_ear_latDisp" value="hop_lh_w/2 + hop_angDepth*tan(hop_angr)/2 + hop_b_t/cos(hop_angr)/2"/>

    <!-- mv2 now gone, must displace parts of mv2 to put them in mv3 -->
    <constant name="hop_ct_z" value="76.95"/>
    <constant name="hop_ctsbhgt" value="214-199.7"/>
    <constant name="mv2disp" value="-hop_ct_z/2"/>
    <constant name="mv3disp" value="hop_angDepth/2-hop_ctsbhgt/2"/>

    <position name="hop_ear1_pos" unit="mm" x="hop_ear_latDisp" y="0" z="mv2disp"/>
    <position name="hop_ear2_pos" unit="mm" x="-hop_ear_latDisp" y="0" z="mv2disp"/>
    <position name="hop_ear3_pos" unit="mm" x="0" y="hop_ear_latDisp" z="mv2disp"/>
    <position name="hop_ear4_pos" unit="mm" x="0" y="-hop_ear_latDisp" z="mv2disp"/>

    <constant name="hop_foil_w" value="464.12"/>
    <constant name="hop_foilframe_t" value="1.4"/>
    <constant name="hop_foilframe_w" value="6"/>
    <constant name="hop_foil_t" value="0.3"/>
    <constant name="hop_foil_z" value="-55.8"/>
    <constant name="hop_foilframe_latdisp" value="hop_foil_w/2-hop_foilframe_w/2"/>
    <position name="hop_foil_pos" unit="mm" x="0" y="0" z="hop_foil_z+mv2disp"/>
    <position name="hop_foilframe_xm_pos" unit="mm" x="-hop_foilframe_latdisp" y="hop_foilframe_w/2" z="hop_foil_z + hop_foil_t/2 + hop_foilframe_t/2+mv2disp"/>
    <position name="hop_foilframe_xp_pos" unit="mm" x="hop_foilframe_latdisp" y="-hop_foilframe_w/2" z="hop_foil_z + hop_foil_t/2 + hop_foilframe_t/2+mv2disp"/>
    <position name="hop_foilframe_ym_pos" unit="mm" x="-hop_foilframe_w/2" y="-hop_foilframe_latdisp" z="hop_foil_z + hop_foil_t/2 + hop_foilframe_t/2+mv2disp"/>
    <position name="hop_foilframe_yp_pos" unit="mm" x="hop_foilframe_w/2" y="hop_foilframe_latdisp" z="hop_foil_z + hop_foil_t/2 + hop_foilframe_t/2+mv2disp"/>

    <!-- top, framework for coded mask (mv3) -->
    <constant name="hop_ctsbwid" value="hop_top_w - hop_b_t"/>
    <constant name="hop_ctsb_dz" value="-hop_ctsbhgt/2-hop_ct_z/2"/>
    <constant name="hop_mv3_dz" value="hop_ctsbhgt/2"/> <!-- move all items in mv3 up by this much, move mv3 itself down by this much. -->
    
    <constant name="hop_ct_x1" value="hop_top_w/2"/>
    <constant name="hop_ct_x2" value="52.9"/>
    <constant name="hop_mv0_dz" value="hop_b_t/2 + hop_angDepth/2 + hop_ct_z/2 - hop_b_wz/2"/>
    <constant name="hop_ct_th" value="atan((hop_ct_x1/2 - hop_ct_x2/2)/hop_ct_z)"/>
    <constant name="hop_ct_xcldisp" value="(hop_ct_x1/2 + (hop_ct_x1 - hop_ct_x2/2))/2"/>
    <constant name="hop_ct_xcsdisp" value="(hop_ct_x1/2 + (hop_ct_x1 - hop_ct_x2/2))/2 - hop_b_t/2"/>
    <constant name="hop_ct_latdisp" value="hop_top_w/2-hop_b_t/2"/>
    <constant name="hop_lgsup_z" value="50"/>
    <constant name="hop_smsup_z" value="30"/>
    <constant name="hop_sup_x12" value="hop_angDepth/cos(hop_angr)"/>
    <constant name="hop_lgsup_x34" value="hop_sup_x12 - hop_lgsup_z*(1/tan(hop_angr) + tan(hop_angr))"/>
    <constant name="hop_smsup_x34" value="hop_sup_x12 - hop_smsup_z*(1/tan(hop_angr) + tan(hop_angr))"/>
    <constant name="hop_lgsup_th" value="atan((hop_lgsup_x34/2+hop_lgsup_z/tan(hop_angr) - hop_sup_x12/2)/hop_lgsup_z)"/>
    <constant name="hop_smsup_th" value="atan((hop_smsup_x34/2+hop_smsup_z/tan(hop_angr) - hop_sup_x12/2)/hop_smsup_z)"/>
    <constant name="hop_smsup_latDisp" value="hop_ear_latDisp + hop_b_t/cos(hop_angr)/2 + hop_smsup_z*cos(hop_angr+hop_smsup_th)/2/cos(hop_smsup_th)"/>
    <constant name="hop_lgsup_latDisp" value="hop_ear_latDisp + hop_b_t/cos(hop_angr)/2 + hop_lgsup_z*cos(hop_angr+hop_lgsup_th)/2/cos(hop_lgsup_th)"/>

    <position name="hop_supxm_pos" unit="mm" x="-hop_smsup_latDisp" y="0" z="-hop_smsup_z/2*sin(hop_angr+hop_lgsup_th)+mv2disp"/>
    <position name="hop_supxp_pos" unit="mm" x="hop_smsup_latDisp" y="0" z="-hop_smsup_z/2*sin(hop_angr+hop_lgsup_th)+mv2disp"/>
    <position name="hop_supym_pos" unit="mm" x="0" y="-hop_lgsup_latDisp" z="-hop_lgsup_z/2*sin(hop_angr+hop_lgsup_th)+mv2disp"/>
    <position name="hop_supyp_pos" unit="mm" x="0" y="hop_lgsup_latDisp" z="-hop_lgsup_z/2*sin(hop_angr+hop_lgsup_th)+mv2disp"/>
    <rotation name="hop_supxm_rot" unit="deg" z="0" x="180" y="90-hop_ang"/>
    <rotation name="hop_supxp_rot" unit="deg" z="180" x="180" y="-(90-hop_ang)"/>
    <rotation name="hop_supym_rot" unit="deg" z="270" y="180" x="90-hop_ang"/>
    <rotation name="hop_supyp_rot" unit="deg" z="90" y="180" x="-(90-hop_ang)"/>

    <position name="hop_ctlmm_pos" unit="mm" x="-hop_ct_xcldisp" y="-hop_ct_latdisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctlmp_pos" unit="mm" x="-hop_ct_latdisp" y="hop_ct_xcldisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctlpm_pos" unit="mm" x="hop_ct_latdisp" y="-hop_ct_xcldisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctlpp_pos" unit="mm" x="hop_ct_xcldisp" y="hop_ct_latdisp" z="hop_mv3_dz+mv3disp"/>

    <position name="hop_ctsmm_pos" unit="mm" x="-hop_ct_latdisp" y="-hop_ct_xcsdisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctsmp_pos" unit="mm" x="-hop_ct_xcsdisp" y="hop_ct_latdisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctspm_pos" unit="mm" x="hop_ct_xcsdisp" y="-hop_ct_latdisp" z="hop_mv3_dz+mv3disp"/>
    <position name="hop_ctspp_pos" unit="mm" x="hop_ct_latdisp" y="hop_ct_xcsdisp" z="hop_mv3_dz+mv3disp"/>

    <position name="hop_ctsbxm_pos" unit="mm" x="-hop_ct_latdisp" y="hop_b_t/2" z="hop_ctsb_dz+hop_mv3_dz+mv3disp"/>
    <position name="hop_ctsbxp_pos" unit="mm" x="hop_ct_latdisp" y="-hop_b_t/2" z="hop_ctsb_dz+hop_mv3_dz+mv3disp"/>
    <position name="hop_ctsbym_pos" unit="mm" x="-hop_b_t/2" y="-hop_ct_latdisp" z="hop_ctsb_dz+hop_mv3_dz+mv3disp"/>
    <position name="hop_ctsbyp_pos" unit="mm" x="hop_b_t/2" y="hop_ct_latdisp" z="hop_ctsb_dz+hop_mv3_dz+mv3disp"/>

    <constant name="hop_tfwd_z" value="346"/>
    <constant name="hop_tfwd_ang" value="180/pi*atan(hop_ct_z/hop_tfwd_z)"/>
    <constant name="hop_tfwd_hd" value="hop_tfwd_z/2+12"/>
    <constant name="hop_tfwd_d" value="12+12/2+hop_tfwd_z"/>
    <position name="hop_tfwd_xmm_pos" x="-hop_tfwd_d" y="-hop_tfwd_hd" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_xmp_pos" x="-hop_tfwd_d" y="hop_tfwd_hd" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_xpm_pos" x="hop_tfwd_d"  y="-hop_tfwd_hd" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_xpp_pos" x="hop_tfwd_d"  y="hop_tfwd_hd" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_ymm_pos" x="-hop_tfwd_hd" y="-hop_tfwd_d" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_ymp_pos" x="-hop_tfwd_hd" y="hop_tfwd_d" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_ypm_pos" x="hop_tfwd_hd"  y="-hop_tfwd_d" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwd_ypp_pos" x="hop_tfwd_hd"  y="hop_tfwd_d" z="-12/cos(hop_tfwd_ang*pi/180)/2+hop_mv3_dz+mv3disp"/>

    <rotation name="hop_tfwd_xmm_rot" unit="deg" z="-90" x="90"/>
    <rotation name="hop_tfwd_xmp_rot" unit="deg" z="90" x="90"/>
    <rotation name="hop_tfwd_xpm_rot" unit="deg" z="-90" x="90"/>
    <rotation name="hop_tfwd_xpp_rot" unit="deg" z="90" x="90"/>
    <rotation name="hop_tfwd_ymm_rot" unit="deg" y="270"/>
    <rotation name="hop_tfwd_ymp_rot" unit="deg" y="270"/>
    <rotation name="hop_tfwd_ypm_rot" unit="deg" z="180" y="270"/>
    <rotation name="hop_tfwd_ypp_rot" unit="deg" z="180" y="270"/>

    <constant name="hop_tfwcc_latdisp" value="hop_tfwd_d"/>
    <constant name="hop_tfwcc_z" value="91.3"/>
    <position name="hop_tfwcc_xm_pos" x="-hop_tfwcc_latdisp" y="0" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwcc_xp_pos" x="hop_tfwcc_latdisp" y="0" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwcc_ym_pos" x="0" y="-hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwcc_yp_pos" x="0" y="hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>

    <position name="hop_tfwsc_xm_pos" x="-hop_tfwcc_latdisp" y="-hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwsc_xp_pos" x="hop_tfwcc_latdisp" y="-hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwsc_ym_pos" x="hop_tfwcc_latdisp" y="hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>
    <position name="hop_tfwsc_yp_pos" x="-hop_tfwcc_latdisp" y="hop_tfwcc_latdisp" z="hop_ct_z/2-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/>


    <constant name="cms_tran_z" value="12"/>
    <constant name="cms_prop_z" value="76"/>
    <constant name="cms_bridge_z" value="346"/>
    <constant name="cms_bridge_x" value="12.6/cos(12.6*pi/180)"/>
    <constant name="cms_keystone_z" value="16"/>
    <constant name="cms_bridge_latdisp" value="12+cms_bridge_z/2"/>
    <constant name="cms_prop_latdisp" value="302+18.6 - 107.3/2"/>
    <position name="cms_prop_xp_pos" unit="mm" x="cms_prop_latdisp" y="0" z="cms_prop_z/2 - hop_ct_z/2+hop_mv3_dz+mv3disp"/>
    <position name="cms_prop_xm_pos" unit="mm" x="-cms_prop_latdisp" y="0" z="cms_prop_z/2 - hop_ct_z/2+hop_mv3_dz+mv3disp"/>
    <position name="cms_tran_pos" unit="mm" x="0" y="0" z="-hop_ct_z/2-cms_tran_z/2+hop_mv3_dz+mv3disp"/>
    <position name="cms_bridge_yp_pos" unit="mm" x="0" y="cms_bridge_latdisp" z="-cms_bridge_x/2+hop_mv3_dz+mv3disp"/>
    <position name="cms_bridge_ym_pos" unit="mm" x="0" y="-cms_bridge_latdisp" z="-cms_bridge_x/2+hop_mv3_dz+mv3disp"/>
    <position name="cms_keystone_pos" unit="mm" x="0" y="0" z="hop_ct_z/2-cms_keystone_z/2+hop_mv3_dz+mv3disp"/>
    <rotation name="cms_bridge_yp_rot" unit="deg" z="-90" x="-90"/>
    <rotation name="cms_bridge_ym_rot" unit="deg" z="90" x="90"/>

    <position name="hop_mv1_pos" x="0" y="0" z="-hop_mv1_dz-hop_mv0_dz"/>
    <position name="hop_mv2_pos" x="0" y="0" z="hop_angDepth/2+hop_b_t/2 - hop_mv0_dz"/>
    <position name="hop_mv3_pos" unit="mm" x="0" y="0" z="hop_angDepth+hop_ct_z/2+hop_b_t/2 - hop_mv0_dz - hop_mv3_dz - mv3disp"/>
    <position name="hop_pos" unit="mm" x="0" y="0" z="hop_b_wz - hop_b_t/2+lowHsg_bxmp_wz+lowHsg_blid_wz+lowCov_b1_wz/2 + hop_mv0_dz"/>

    <!-- coded mask base -->
    <constant name="cm_mv_x" value="746.2"/>
    <constant name="cmb_sbx" value="746.2-15.1"/>
    <constant name="cmb_sby" value="15.1"/>
    <constant name="cmb_bz" value="12"/>
    <constant name="cmb_ncby" value="(cmb_sbx-cmb_sby-24)/2"/>
    <constant name="cmb_diagx" value="cmb_ncby - 6"/> <!-- other side of quarter-panel -->
    <constant name="cmb_diag" value="sqrt(cmb_ncby*cmb_ncby + cmb_diagx*cmb_diagx)"/>

    <position name="cmb_sbxp_pos" unit="mm" x="cmb_sbx/2" y="-cmb_sby/2" z="-3"/>
    <position name="cmb_sbyp_pos" unit="mm" x="cmb_sby/2" y="cmb_sbx/2" z="-3"/>
    <position name="cmb_sbxm_pos" unit="mm" x="-cmb_sbx/2" y="cmb_sby/2" z="-3"/>
    <position name="cmb_sbym_pos" unit="mm" x="-cmb_sby/2" y="-cmb_sbx/2" z="-3"/>

    <position name="cmb_wcb_pos" unit="mm" x="0" y="0" z="-3"/>
    <position name="cmb_ncbpp_pos" unit="mm" x="cmb_bz"  y="cmb_ncby/2+12" z="-3"/>
    <position name="cmb_ncbpm_pos" unit="mm" x="cmb_bz"  y="-cmb_ncby/2-12" z="-3"/>
    <position name="cmb_ncbmp_pos" unit="mm" x="-cmb_bz" y="-cmb_ncby/2-12" z="-3"/>
    <position name="cmb_ncbmm_pos" unit="mm" x="-cmb_bz" y="cmb_ncby/2+12" z="-3"/>
    
    <constant name="cmb_dtcx" value="6+12+340/2"/>
    <constant name="cmb_dtcy" value="12+cmb_ncby/2"/>
    <constant name="cmb_dtdx" value="3/sqrt(2)"/>
    <constant name="cmb_dtdy" value="3/sqrt(2)"/>
    <position name="cmb_dtppp_pos" unit="mm" x="cmb_dtcx+cmb_dtdx" y="cmb_dtcy - cmb_dtdy" z="-3"/>
    <position name="cmb_dtppm_pos" unit="mm" x="cmb_dtcx - cmb_dtdx" y="cmb_dtcy+cmb_dtdy" z="-3"/>
    <rotation name="cmb_dtppp_rot" unit="deg" x="90"  y="45.5"/>
    <rotation name="cmb_dtppm_rot" unit="deg" x="90" y="45.5"/>
    <position name="cmb_dtpmp_pos" unit="mm" x="cmb_dtcx+cmb_dtdx" y="-cmb_dtcy+cmb_dtdy" z="-3"/>
    <position name="cmb_dtpmm_pos" unit="mm" x="cmb_dtcx - cmb_dtdx" y="-cmb_dtcy - cmb_dtdy" z="-3"/>
    <rotation name="cmb_dtpmp_rot" unit="deg" x="90"  y="-45.5"/>
    <rotation name="cmb_dtpmm_rot" unit="deg" x="90" y="-45.5"/>
    <position name="cmb_dtmpp_pos" unit="mm" x="-cmb_dtcx - cmb_dtdx" y="cmb_dtcy - cmb_dtdy" z="-3"/>
    <position name="cmb_dtmpm_pos" unit="mm" x="-cmb_dtcx+cmb_dtdx" y="cmb_dtcy+cmb_dtdy" z="-3"/>
    <rotation name="cmb_dtmpp_rot" unit="deg" x="90"  y="-45.5"/>
    <rotation name="cmb_dtmpm_rot" unit="deg" x="90" y="-45.5"/>
    <position name="cmb_dtmmp_pos" unit="mm" x="-cmb_dtcx - cmb_dtdx" y="-cmb_dtcy+cmb_dtdy" z="-3"/>
    <position name="cmb_dtmmm_pos" unit="mm" x="-cmb_dtcx+cmb_dtdx" y="-cmb_dtcy - cmb_dtdy" z="-3"/>
    <rotation name="cmb_dtmmp_rot" unit="deg" x="90"  y="45.5"/>
    <rotation name="cmb_dtmmm_rot" unit="deg" x="90" y="45.5"/>
    <position name="codedMask_imp_pos" unit="mm" x="0" y="0" z="3.5"/>
    <position name="codedMask_pos" unit="mm" x="0" y="0" z="lowCov_b1_wz/2 + lowHsg_bymp_wz + lowHsg_blid_wz + hop_b_wz + hop_angDepth + hop_ct_z + 9"/>

    <!-- "sup. struct. i/f plate" -->
    <constant name="ssifp_t" value="3"/>
    <constant name="ssifp_z" value="lowCov_b1_wz + lowHsg_bxmp_wz + lowHsg_blid_wz + hop_b_wz"/>
    <position name="ssifp_ym_pos" unit="mm" x="0" y="-lowCov_b1_wy/2-ssifp_t/2" z="ssifp_z/2-lowCov_b1_wz/2"/>
    <position name="ssifp_yp_pos" unit="mm" x="0" y="lowCov_b1_wy/2+ssifp_t/2" z="ssifp_z/2-lowCov_b1_wz/2"/>

    <!-- wake support structure -->
    <constant name="ws_ztot" value="237"/>
    <constant name="ws_xtot" value="596.9"/>
    <constant name="ws_ytot" value="87"/>
    <constant name="ws_base_x" value="5"/>
    <constant name="ws_bot_z" value="4"/>
    <constant name="ws_back_y" value="5"/>
    <position name="ws_base_pos" unit="mm" x="ws_xtot/2-ws_base_x/2" y="0" z="0"/>
    <position name="ws_back_pos" unit="mm" x="-ws_base_x/2" y="0" z="0"/>
    <position name="ws_bot_pos" unit="mm" x="0" y="0" z="-ws_ztot/2+ws_bot_z/2"/>
    <position name="ws_mid_pos" unit="mm" x="0" y="0" z="0"/>
    <position name="ws_top_pos" unit="mm" x="0" y="0" z="ws_ztot/2 - ws_bot_z/2"/>
    <position name="ws_pos" unit="mm" x="-lowCov_b1_wx/2+ws_xtot/2" y="-lowCov_b1_wy/2-ssifp_t-ws_back_y/2" z="ws_ztot/2-lowCov_b1_wz/2-11.2-7.5"/>

    <!-- ram support structure -->
    <constant name="rs_xtot" value="765"/>
    <constant name="rs_ytot" value="101.6"/>
    <constant name="rs_ztot" value="365.9"/>
    <constant name="rs_base_x" value="5"/>
    <constant name="rs_back_t" value="5"/>
    <constant name="rs_fin_z" value="4"/>
    <constant name="rs_backa_z" value="115-4"/>
    <constant name="rs_backb_z" value="237-4-4-4-rs_backa_z"/>
    <constant name="rs_flap_z" value="rs_ztot - 237"/>
    <constant name="rs_fin2_zc" value="-rs_ztot/2 + 5*rs_fin_z/2 + rs_backa_z + rs_backb_z"/>
    <position name="rs_fin1a_pos" unit="mm" x="0" y="0" z="-rs_ztot/2+rs_fin_z/2"/>
    <position name="rs_fin1b_pos" unit="mm" x="0" y="0" z="-rs_ztot/2+3*rs_fin_z/2 + rs_backa_z"/>
    <position name="rs_fin2_pos" unit="mm" x="0" y="0" z="rs_fin2_zc"/>
    <position name="rs_backa_pos" unit="mm" x="0" y="0" z="-rs_ztot/2 + rs_fin_z + rs_backa_z/2"/>
    <position name="rs_backb_pos" unit="mm" x="0" y="0" z="-rs_ztot/2 + rs_fin_z + rs_backa_z + rs_fin_z + rs_backb_z/2"/>
    <constant name="rs_flapAng" value="22.5"/>
    <position name="rs_base_pos" unit="mm" x="rs_xtot/2-rs_base_x/2" y="0" z="0"/>
    <position name="rs_pos" unit="mm" x="" y="-rs_ytot/2+59.6 + lowCov_b1_wy/2 + ssifp_t" z="rs_ztot/2-lowCov_b1_wz/2-11.2-7.5"/>
    <constant name="rs_scrBox_x" value="88"/>
    <constant name="rs_scrBox_y" value="22"/>
    <constant name="rs_scrBox_z" value="17"/>
    <position name="rs_scrBox_xmzm_pos" unit="mm" x="rs_xtot/2-474.9-rs_scrBox_x/2" y="rs_ytot/2-59.6+rs_scrBox_y/2" z="-rs_ztot/2+rs_fin_z+rs_scrBox_z/2"/>
    <position name="rs_scrBox_xpzm_pos" unit="mm" x="rs_xtot/2-210.9-rs_scrBox_x/2" y="rs_ytot/2-59.6+rs_scrBox_y/2" z="-rs_ztot/2+rs_fin_z+rs_scrBox_z/2"/>
    <position name="rs_scrBox_xmzp_pos" unit="mm" x="rs_xtot/2-474.9-rs_scrBox_x/2" y="rs_ytot/2-59.6+rs_scrBox_y/2" z="rs_fin2_zc-rs_fin_z/2-rs_scrBox_z/2"/>
    <position name="rs_scrBox_xpzp_pos" unit="mm" x="rs_xtot/2-210.9-rs_scrBox_x/2" y="rs_ytot/2-59.6+rs_scrBox_y/2" z="rs_fin2_zc-rs_fin_z/2-rs_scrBox_z/2"/>

    <constant name="rs_flap_slotOffset" value="384.4-2.5"/> <!-- some trial and error here -->
    <constant name="rs_flapa_x" value="rs_flap_slotOffset-5-5"/>
    <constant name="rs_flapb_x" value="765-rs_flap_slotOffset-5"/>
    <position name="rs_flapa_pos" unit="mm" x="rs_xtot/2-rs_base_x-rs_flapa_x/2" y="rs_ytot/2 - rs_flap_z*sin(rs_flapAng*pi/180)/2 - rs_back_t/cos(rs_flapAng*pi/180)" z="rs_ztot/2-(rs_flap_z)/2"/>
    <position name="rs_flapb_pos" unit="mm" x="-rs_xtot/2+rs_flapb_x/2" y="rs_ytot/2 - rs_flap_z*sin(rs_flapAng*pi/180)/2 - rs_back_t/cos(rs_flapAng*pi/180)" z="rs_ztot/2-(rs_flap_z)/2"/>

    <!-- NOTE: move ssifp to wake/ram support structure MV. -->

    <!-- starboard radiator -->
    <constant name="sr_bot" value="349"/>
    <constant name="sr_side" value="430"/>
    <constant name="sr_y" value="701"/>
    <constant name="sr_t" value="3"/>
    <constant name="sr_cornerxOffset" value="hop_top_w/2 - lowCov_b1_wx/2 + sr_t"/>
    <constant name="sr_cornerzOffset" value="40.8-15.7 + sr_t + 15"/>
    <constant name="sr_yOffset" value="sr_y/2 + hop_top_w/2 - 761.1"/>
    <position name="sr_botb_pos" unit="mm" x="sr_bot/2 - lowCov_b1_wx/2 - sr_cornerxOffset" y="sr_yOffset" z="-sr_cornerzOffset+sr_t/2"/>
    <position name="sr_sideb_pos" unit="mm" x="sr_t/2 - lowCov_b1_wx/2 - sr_cornerxOffset" y="sr_yOffset" z="-sr_cornerzOffset + sr_side/2 + sr_t"/>

    <!--  -->
  </define>

  <materials>
    <element name="Hydrogen" formula="H"  Z="1.">  <atom value="1.01"/>   </element>
    <element name="Carbon" formula="C" Z="6."> <atom value="12.01"/> </element>
    <element name="Nitrogen" formula="N"  Z="7.">  <atom value="14.01"/>  </element>
    <element name="Oxygen"   formula="O"  Z="8.">  <atom value="16.0"/>   </element>

    <element name="Aluminum" formula="Al"  Z="13.0">  <atom value="26.98"/>   </element>
    <element name="Manganese" formula="Mn" Z="25.0"> <atom value="54.938"/> </element>
    <element name="Magnesium" formula="Mg" Z="12.0"> <atom value="24.305"/> </element>
    <element name="Silicon" formula="Si" Z="14.0"> <atom value="28.086"/> </element>
    <element name="Iron" formula="Fe" Z="26.0"> <atom value="55.845"/> </element>
    <element name="Chromium" formula="Cr" Z="24.0"> <atom value="51.996"/> </element>

    <material name="AL6082T6">
      <D value="2.70" unit="g/cm3"/> 
      <fraction n="0.974" ref="Aluminum"/>
      <fraction n="0.009" ref="Magnesium"/>
      <fraction n="0.007" ref="Manganese"/>
      <fraction n="0.01" ref="Silicon"/>
    </material>

    <material name="Kapton">
      <D value="1.42" unit="g/cm3"/>
      <fraction n="0.026362" ref="Hydrogen"/>
      <fraction n="0.691133" ref="Carbon"/>
      <fraction n="0.073270" ref="Nitrogen"/>
      <fraction n="0.209235" ref="Oxygen"/>
    </material>

    <material name="StainlessSteel">
      <D value="7.70" unit="g/cm3"/>
      <fraction n="0.17" ref="Chromium"/>
      <fraction n="0.83" ref="Iron"/>
    </material>

    <material name="Vacuum" Z="1.0"> <D value="0.0" unit="g/cm3"/> <atom value="1.00794"/> </material>

    <material name="Lead" Z="82."> <D value="11.35" unit="g/cm3"/> <atom value="207.2"/> </material>
    <material name="Tin"  Z="50."> <D value="7.31" unit="g/cm3"/> <atom value="117.81"/> </material>
    <material name="Tantalum" Z="73."> <D value="16.65" unit="g/cm3"/> <atom value="180.95"/> </material>

  </materials>

  <solids>
    <box name="WorldBox" lunit="km" x="1.0" y="1.0" z="1.0"/>

    <!-- solids for lower cover: lowCov_... -->
    <box name="lowCov_mv_0" lunit="mm" x="lowCov_b1_wx+lowCov_t1_z+lowCov_b2_wx" y="lowCov_b1_wy" z="lowCov_b1_wz"/>
    <box name="lowCov_mv_ext" lunit="mm" x="1000" y="230" z="100"/>
    <subtraction name="lowCov_mv_1"> <first ref="lowCov_mv_0"/> <second ref="lowCov_mv_ext"/> <position name="crap" x="300" y="310" z="0"/> <rotation name="crap" unit="deg" z="-42"/> </subtraction>
    <subtraction name="lowCov_mv"> <first ref="lowCov_mv_1"/> <second ref="lowCov_mv_ext"/> <position name="crap" x="300" y="-310" z="0"/> <rotation name="crap" unit="deg" z="42"/> </subtraction>



    <box name="lowCov_b1" lunit="mm" x="lowCov_b1_wx" y="lowCov_b1_wy" z="lowCov_b1_wz"/>
    <trd name="lowCov_t1" lunit="mm" x1="lowCov_t1_x1" x2="lowCov_t1_x2" y1="lowCov_t1_y1" y2="lowCov_t1_y2" z="lowCov_t1_z"/>
    <box name="lowCov_b2" lunit="mm" x="lowCov_b2_wx" y="lowCov_b2_wy" z="lowCov_b2_wz"/>

    <!-- solids for lower housing: lowHsg_... -->
    <box name="lowHsg_mv" lunit="mm" x="lowHsg_blid_wx" y="lowHsg_blid_wy" z="lowHsg_bxmp_wz+lowHsg_blid_wz"/>
    <box name="lowHsg_bxm" lunit="mm" x="lowHsg_bxmp_wx" y="lowHsg_bxmp_wy" z="lowHsg_bxmp_wz"/>
    <box name="lowHsg_bxp" lunit="mm" x="lowHsg_bxmp_wx" y="lowHsg_bxmp_wy" z="lowHsg_bxmp_wz"/>
    <box name="lowHsg_bym" lunit="mm" x="lowHsg_bymp_wx" y="lowHsg_bymp_wy" z="lowHsg_bymp_wz"/>
    <box name="lowHsg_byp" lunit="mm" x="lowHsg_bymp_wx" y="lowHsg_bymp_wy" z="lowHsg_bymp_wz"/>
    <box name="lowHsg_blid" lunit="mm" x="lowHsg_blid_wx" y="lowHsg_blid_wy" z="lowHsg_blid_wz"/>

    <!-- solids for dpu box: dpuBox_... -->
    <box name="dpuBox_mv_0" lunit="mm" x="169.9" y="575" z="dpuBox_bbck_wz+dpuBox_bb_wz"/>
    <box name="dpuBox_mv_ext" lunit="mm" x="500" y="120" z="1000"/>
    <subtraction name="dpuBox_mv_1"> <first ref="dpuBox_mv_0"/> <second ref="dpuBox_mv_ext"/> <position name="crap" x="169.9/2" y="-575/2" z="0"/> <rotation name="crap" unit="deg" z="22"/> </subtraction>
    <subtraction name="dpuBox_mv"> <first ref="dpuBox_mv_1"/> <second ref="dpuBox_mv_ext"/> <position name="crap" x="169.9/2" y="575/2" z="0"/> <rotation name="crap" unit="deg" z="-22"/> </subtraction>

    <box name="dpuBox_bb" lunit="mm" x="dpuBox_bb_wx" y="dpuBox_bb_wy" z="dpuBox_bb_wz"/>
    <trd name="dpuBox_bt" lunit="mm" x1="dpuBox_bt_x1" x2="dpuBox_bt_x2" y1="dpuBox_bt_y1" y2="dpuBox_bt_y2" z="dpuBox_bt_z"/>
    <xtru name="dpuBox_ff" lunit="mm">
      <twoDimVertex x="-3" y="0"/>
      <twoDimVertex x="3" y="0"/>
      <twoDimVertex x="3" y="35"/>
      <twoDimVertex x="-3" y="35"/>
      <section zOrder="1" zPosition="0" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="dpuBox_bb_wx" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="3" zPosition="dpuBox_bb_wx + dpuBox_sbympal_wx*cos(53.1*pi/180)" xOffset="0" yOffset="dpuBox_sbympal_wx*sin(53.1*pi/180)" scalingFactor="0.001"/>
    </xtru>
    <xtru name="dpuBox_sides" lunit="mm">
      <twoDimVertex x="dpuBox_bb_wx/2" y="-dpuBox_bb_wy/2"/>
      <twoDimVertex x="dpuBox_bb_wx/2" y="dpuBox_bb_wy/2"/>
      <twoDimVertex x="-dpuBox_bb_wx/2" y="dpuBox_bb_wy/2"/>
      <twoDimVertex x="-dpuBox_bb_wx/2-dpuBox_bt_z" y="dpuBox_bt_y2/2"/>
      <twoDimVertex x="-dpuBox_bb_wx/2-dpuBox_bt_z" y="dpuBox_bt_y2/2 - 5/cos(53*pi/180)"/>
      <twoDimVertex x="-dpuBox_bb_wx/2 - 5/tan(((180-53)/2)*pi/180)" y="dpuBox_bb_wy/2-5"/>
      <twoDimVertex x="dpuBox_bb_wx/2-3" y="dpuBox_bb_wy/2-5"/>
      <twoDimVertex x="dpuBox_bb_wx/2-3" y="-(dpuBox_bb_wy/2-5)"/>
      <twoDimVertex x="-dpuBox_bb_wx/2 - 5/tan(((180-53)/2)*pi/180)" y="-(dpuBox_bb_wy/2-5)"/>
      <twoDimVertex x="-dpuBox_bb_wx/2-dpuBox_bt_z" y="-dpuBox_bt_y2/2 + 5/cos(53*pi/180)"/>
      <twoDimVertex x="-dpuBox_bb_wx/2-dpuBox_bt_z" y="-dpuBox_bt_y2/2"/>
      <twoDimVertex x="-dpuBox_bb_wx/2" y="-dpuBox_bb_wy/2"/>
      <section zOrder="1" zPosition="-145+dpuBox_bb_wz/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="-dpuBox_bb_wz/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>

    <!-- solids for hopper: hop_... -->
    <box name="hop_bxm" lunit="mm" x="hop_b_t" y="hop_b_wy" z="hop_b_wz - hop_b_t"/>

    <box name="hop_bxp" lunit="mm" x="hop_b_t" y="hop_b_wy" z="hop_b_wz - hop_b_t"/>
    <!--
         I'm wrong, there's no hole in the hop_box to accomodate the dpuBox.
    <box name="hop_bxp_hole" lunit="mm" x="2*hop_b_t" y="hop_b_hwy" z="hop_b_hwz"/>
    <subtraction name="hop_bxp_sub">
      <first ref="hop_bxp"/>
      <second ref="hop_bxp_hole"/>
      <positionref ref="hop_b_hdz"/>
      <rotationref ref="id"/>
    </subtraction>
    -->

    <box name="hop_mv0" lunit="mm" x="hop_top_w" y="hop_top_w" z="hop_b_wz+hop_angDepth+hop_ct_z"/>
    <box name="hop_mv1" lunit="mm" x="hop_b_wx" y="hop_b_wy" z="hop_b_wz"/>
    <!-- <box name="hop_mv2" lunit="mm" x="hop_top_w" y="hop_top_w" z="hop_angDepth"/> -->

    <box name="hop_mv3_0" lunit="mm" x="hop_top_w" y="hop_top_w" z="hop_ct_z+hop_angDepth"/>
    <box name="hop_mv3_ext1" lunit="mm" x="600*2" y="150" z="80"/>
    <box name="hop_mv3_ext2" lunit="mm" x="400" y="250" z="80"/>
    <box name="hop_mv3_ext3" lunit="mm" x="(hop_top_w-6)" y="235" z="1000"/>
    <subtraction name="hop_mv3_1"> <first ref="hop_mv3_0"/> <second ref="hop_mv3_ext1"/> <position name="crap" x="-hop_top_w/2" y="-hop_top_w/2" z="-(hop_angDepth+hop_ct_z)/2"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="hop_mv3_2"> <first ref="hop_mv3_1"/> <second ref="hop_mv3_ext2"/> <position name="crap" x="hop_top_w/2" y="-hop_top_w/2" z="-(hop_angDepth+hop_ct_z)/2"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="hop_mv3_3"> <first ref="hop_mv3_2"/> <second ref="hop_mv3_ext3"/> <position name="crap" x="-hop_top_w/2" y="hop_top_w/2" z="-(hop_angDepth+hop_ct_z)/2"/> <rotation name="crap" unit="deg" x="-hop_ang"/> </subtraction>
    <subtraction name="hop_mv3_4"> <first ref="hop_mv3_3"/> <second ref="hop_mv3_ext3"/> <position name="crap" x="hop_top_w/2" y="hop_top_w/2" z="-(hop_angDepth+hop_ct_z)/2"/> <rotation name="crap" unit="deg" x="-hop_ang"/> </subtraction>
    <subtraction name="hop_mv3"> <first ref="hop_mv3_4"/> <second ref="hop_mv3_ext3"/> <position name="crap" x="0" y="hop_top_w/2+50" z="-(hop_angDepth+hop_ct_z)/2"/> <rotation name="crap" unit="deg" x="-hop_ang"/> </subtraction>



    <box name="hop_bym" lunit="mm" x="hop_b_wx-2*hop_b_t" y="hop_b_t" z="hop_b_wz - hop_b_t"/>
    <box name="hop_byp" lunit="mm" x="hop_b_wx-2*hop_b_t" y="hop_b_t" z="hop_b_wz - hop_b_t"/>
    <box name="hop_bzpsolid" lunit="mm" x="hop_b_wx" y="hop_b_wy" z="hop_b_t"/>
    <box name="hop_bzphole" lunit="mm" x="hop_lh_w" y="hop_lh_w" z="2*hop_b_t"/>
    <subtraction name="hop_bzp">
      <first ref="hop_bzpsolid"/>
      <second ref="hop_bzphole"/>
      <positionref ref="orig"/>
      <rotationref ref="id"/>
    </subtraction>

    <trap name="hop_ear_0" lunit="mm" aunit="deg" z="hop_angDepth" theta="hop_ang" phi="90" x1="hop_lh_w" x2="hop_lh_w+2*hop_b_t/cos(hop_angr)" y1="hop_b_t/cos(hop_angr)" x3="hop_top_w-2*hop_b_t/cos(hop_angr)" x4="hop_top_w" y2="hop_b_t/cos(hop_angr)" alpha1="0" alpha2="0"/>
    <box name="hop_ear_cc_ext" lunit="mm" x="24" y="10000" z="hop_tfwcc_z"/>
    <box name="hop_ear_sc_ext" lunit="mm" x="12*2" y="10000" z="hop_tfwcc_z"/>
    <subtraction name="hop_ear_1"> <first ref="hop_ear_0"/> <second ref="hop_ear_cc_ext"/> <position name="crap" z="hop_ct_z-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="hop_ear_2"> <first ref="hop_ear_1"/> <second ref="hop_ear_sc_ext"/> <position name="crap" x="-hop_tfwcc_latdisp-6" z="hop_ct_z-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="hop_ear_3"> <first ref="hop_ear_2"/> <second ref="hop_ear_sc_ext"/> <position name="crap" x="hop_tfwcc_latdisp+6" z="hop_ct_z-hop_tfwcc_z/2+hop_mv3_dz+mv3disp"/> <rotationref ref="id"/> </subtraction>
    <box name="hop_ctsb_earext" lunit="mm" x="hop_ctsbwid+1000" y="hop_b_t*2" z="hop_ctsbhgt+100"/>
    <subtraction name="hop_ear"> <first ref="hop_ear_3"/> <second ref="hop_ctsb_earext"/> <position name="crap" unit="mm" x="0" y="hop_top_w/2-hop_ear_latDisp" z="hop_ctsb_dz+hop_mv3_dz+mv3disp+hop_ct_z/2+0.1"/> <rotationref ref="id"/> </subtraction>


    <box name="hop_ctsb" lunit="mm" x="hop_ctsbwid" y="hop_b_t" z="hop_ctsbhgt"/>
    <trap name="hop_ctl" lunit="mm" aunit="rad" z="hop_ct_z" theta="hop_ct_th" phi="0" x1="hop_ct_x1" x2="hop_ct_x1" y1="hop_b_t" x3="hop_ct_x2" x4="hop_ct_x2" y2="hop_b_t" alpha1="0" alpha2="0"/>
    <trap name="hop_cts" lunit="mm" aunit="rad" z="hop_ct_z" theta="hop_ct_th" phi="0" x1="hop_ct_x1 - hop_b_t" x2="hop_ct_x1 - hop_b_t" y1="hop_b_t" x3="hop_ct_x2 - hop_b_t" x4="hop_ct_x2 - hop_b_t" y2="hop_b_t" alpha1="0" alpha2="0"/>

    <box name="hop_sup_ext" lunit="mm" x="hop_ctsbhgt*2+1" y="hop_ctsbhgt*2+1" z="hop_ctsbhgt*2+1"/>
    <trap name="hop_lgsup_0" lunit="mm" aunit="rad" z="hop_lgsup_z" theta="hop_lgsup_th" phi="0" x1="hop_sup_x12" x2="hop_sup_x12" y1="3" x3="hop_lgsup_x34" x4="hop_lgsup_x34" y2="3" alpha1="0" alpha2="0"/>
    <subtraction name="hop_lgsup"> <first ref="hop_lgsup_0"/> <second ref="hop_sup_ext"/> <position x="-hop_sup_x12/2-hop_lgsup_z*sin(hop_lgsup_th)/2" y="0" z="-hop_lgsup_z/2"/> <rotation unit="deg" y="90-hop_ang"/> </subtraction>

    <trap name="hop_smsup_0" lunit="mm" aunit="rad" z="hop_smsup_z" theta="hop_smsup_th" phi="0" x1="hop_sup_x12" x2="hop_sup_x12" y1="6" x3="hop_smsup_x34" x4="hop_smsup_x34" y2="6" alpha1="0" alpha2="0"/>
    <subtraction name="hop_smsup"> <first ref="hop_smsup_0"/> <second ref="hop_sup_ext"/> <position x="-hop_sup_x12/2-hop_smsup_z*sin(hop_smsup_th)/2" y="0" z="-hop_smsup_z/2"/> <rotation unit="deg" y="90-hop_ang"/> </subtraction>

    <para name="hop_tfwd" lunit="mm" aunit="deg" x="12" y="12" z="hop_tfwd_z" alpha="0" theta="hop_tfwd_ang" phi="0"/> <!-- tfwd = top framework diagonal -->
    <box name="hop_tfwcc" lunit="mm" x="24" y="12" z="hop_tfwcc_z"/>
    <box name="hop_tfwsc" lunit="mm" x="12" y="12" z="hop_tfwcc_z"/>

    <box name="hop_foil" lunit="mm" x="hop_foil_w" y="hop_foil_w" z="hop_foil_t"/>
    <box name="hop_foilframe" lunit="mm" x="hop_foil_w - hop_foilframe_w" y="hop_foilframe_w" z="hop_foilframe_t"/>

    <!-- coded mask support parts in hopper MV3 -->
    <para name="cms_prop" lunit="mm" aunit="deg" x="12.7/sin(43.5*pi/180)" y="24" z="cms_prop_z" alpha="0" theta="43.5" phi="0"/>
    <box name="cms_tran" lunit="mm" x="716" y="24" z="cms_tran_z"/>
    <para name="cms_bridge" lunit="mm" aunit="deg" x="cms_bridge_x" y="24" z="cms_bridge_z" alpha="0" theta="12.4" phi="0"/>
    <box name="cms_keystone" lunit="mm" x="24" y="24" z="cms_keystone_z"/>

    <!-- coded mask base -->

    <box name="cm_mv" lunit="mm" x="cm_mv_x" y="cm_mv_x" z="18"/>
    <box name="cmb_sb" lunit="mm" x="cmb_sbx" y="cmb_sby" z="cmb_bz"/>
    <box name="cmb_wcb" lunit="mm" x="716" y="24" z="cmb_bz"/>
    <box name="cmb_ncb" lunit="mm" x="12" y="cmb_ncby" z="cmb_bz"/>
    <trd name="cmb_dt" lunit="mm" x1="cmb_diag-0.2" x2="cmb_diag - 12.0 - 0.2" y1="12" y2="12" z="6"/>  <!-- -0.2 fudge factors to avoid overlap. -->

    <!-- "sup. struct. i/f plate" -->
    <box name="ssifp" lunit="mm" x="lowCov_b1_wx" y="ssifp_t" z="ssifp_z"/>

    <!-- wake support -->
    <box name="ws_base" lunit="mm" x="ws_base_x" y="ws_ytot" z="ws_ztot"/>
    <box name="ws_back" lunit="mm" x="ws_xtot - ws_base_x" y="ws_back_y" z="ws_ztot-2*ws_bot_z"/>
    <xtru name="ws_bot" lunit="mm">
      <twoDimVertex x="ws_xtot/2-ws_base_x" y="-ws_ytot/2"/>
      <twoDimVertex x="-ws_xtot/2" y="-ws_back_y/2"/>
      <twoDimVertex x="-ws_xtot/2" y="ws_back_y/2"/>
      <twoDimVertex x="ws_xtot/2 - 155" y="ws_back_y/2"/>
      <twoDimVertex x="ws_xtot/2-ws_base_x" y="ws_ytot/2"/>
      <section zOrder="1" zPosition="-ws_bot_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="ws_bot_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>
    <xtru name="ws_mid" lunit="mm">
      <twoDimVertex x="ws_xtot/2-ws_base_x" y="-ws_ytot/2"/>
      <twoDimVertex x="-ws_xtot/2" y="-ws_back_y/2"/>
      <twoDimVertex x="ws_xtot/2-ws_base_x" y="-ws_back_y/2"/>
      <section zOrder="1" zPosition="-ws_bot_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="ws_bot_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>


    <box name="ws_mv_0" lunit="mm" x="ws_xtot" y="ws_ytot" z="ws_ztot"/>
    <box name="ws_mv_ext1" lunit="mm" x="(ws_xtot - 155)*2" y="41*2" z="1000"/>
    <box name="ws_mv_ext2" lunit="mm" x="200" y="60" z="1000"/>
    <subtraction name="ws_mv_1"> <first ref="ws_mv_0"/> <second ref="ws_mv_ext1"/> <position name="crap" x="-ws_xtot/2" y="ws_ytot/2" z="0"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="ws_mv"> <first ref="ws_mv_1"/> <second ref="ws_mv_ext2"/> <position name="crap" x="ws_xtot/2-75" y="ws_ytot/2+30" z="0"/> <rotation unit="deg" name="crap" z="20"/> </subtraction>

    <box name="rs_base" lunit="mm" x="rs_base_x" y="rs_ytot" z="rs_ztot"/>
    <box name="rs_scrBox" lunit="mm" x="rs_scrBox_x" y="rs_scrBox_y" z="rs_scrBox_z"/>
    <xtru name="rs_fin1" lunit="mm">
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="-rs_ytot/2"/>
      <twoDimVertex x="rs_xtot/2 - 177.3" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2-567" y="rs_ytot/2-59.6+27"/>
      <twoDimVertex x="rs_xtot/2-351" y="rs_ytot/2-59.6+27"/>
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="rs_ytot/2-59.6+27 + 19"/>

      <section zOrder="1" zPosition="-rs_fin_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="rs_fin_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>
    <xtru name="rs_fin2" lunit="mm">
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2-567" y="rs_ytot/2-59.6+27"/>
      <twoDimVertex x="rs_xtot/2-351" y="rs_ytot/2-59.6+27"/>
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="rs_ytot/2-59.6+27 + 19"/>

      <section zOrder="1" zPosition="-rs_fin_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="rs_fin_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>
    <xtru name="rs_backa" lunit="mm">
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="-rs_ytot/2+64"/>
      <twoDimVertex x="rs_xtot/2 - 566" y="-rs_ytot/2+64"/>
      <twoDimVertex x="rs_xtot/2 - 613.9" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - 613.9" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - 566" y="-rs_ytot/2+64+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="-rs_ytot/2+64+rs_back_t"/>

      <section zOrder="1" zPosition="-rs_backa_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="rs_backa_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>
    <xtru name="rs_backb" lunit="mm">
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="-rs_ytot/2+64"/>
      <twoDimVertex x="rs_xtot/2 - 566" y="-rs_ytot/2+64"/>
      <twoDimVertex x="rs_xtot/2 - 613.9" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6"/>
      <twoDimVertex x="-rs_xtot/2" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - 613.9" y="rs_ytot/2-59.6+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - 566" y="-rs_ytot/2+64+rs_back_t"/>
      <twoDimVertex x="rs_xtot/2 - rs_base_x" y="-rs_ytot/2+64+rs_back_t"/>

      <section zOrder="1" zPosition="-rs_backb_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
      <section zOrder="2" zPosition="rs_backb_z/2" xOffset="0" yOffset="0" scalingFactor="1"/>
    </xtru>
    <trap name="rs_flapa" lunit="mm" aunit="deg" theta="rs_flapAng" phi="90" x1="rs_flapa_x" x2="rs_flapa_x" y1="rs_back_t/cos(rs_flapAng*pi/180)" x3="rs_flapa_x" x4="rs_flapa_x"  y2="rs_back_t/cos(rs_flapAng*pi/180)" z="rs_flap_z" alpha1="0" alpha2="0"/>
    <trap name="rs_flapb" lunit="mm" aunit="deg" theta="rs_flapAng" phi="90" x1="rs_flapb_x" x2="rs_flapb_x" y1="rs_back_t/cos(rs_flapAng*pi/180)" x3="rs_flapb_x" x4="rs_flapb_x"  y2="rs_back_t/cos(rs_flapAng*pi/180)" z="rs_flap_z" alpha1="0" alpha2="0"/>

    <box name="ramSup_mv_0" x="rs_xtot" y="rs_ytot" z="rs_ztot"/>
    <box name="ramSup_mv_ext1" lunit="mm" x="(rs_xtot - 177.3)*2" y="(101.6-59.6)*2" z="1000"/>
    <box name="ramSup_mv_ext2" lunit="mm" x="240" y="60" z="1000"/>
    <box name="ramSup_mv_ext3" lunit="mm" x="8" y="1000" z="200"/>
    <subtraction name="ramSup_mv_1"> <first ref="ramSup_mv_0"/> <second ref="ramSup_mv_ext1"/> <position name="crap" x="-rs_xtot/2" y="-rs_ytot/2" z="0"/> <rotationref ref="id"/> </subtraction>
    <subtraction name="ramSup_mv_2"> <first ref="ramSup_mv_1"/> <second ref="ramSup_mv_ext2"/> <position name="crap" x="rs_xtot/2-75" y="-rs_ytot/2-30" z="0"/> <rotation unit="deg" name="crap" z="-20"/> </subtraction>
    <subtraction name="ramSup_mv_3"> <first ref="ramSup_mv_2"/> <second ref="ramSup_mv_0"/> <position name="crap" x="-6" y="-rs_ytot/2+30" z="rs_ztot/2"/> <rotation unit="deg" name="crap" x="-rs_flapAng"/> </subtraction>
    <subtraction name="ramSup_mv"> <first ref="ramSup_mv_3"/> <second ref="ramSup_mv_ext3"/> <position name="crap" x="rs_xtot/2-rs_flapa_x-rs_base_x-5" y="0" z="rs_ztot/2"/> <rotationref ref="id"/> </subtraction>
    


    <box name="sr_botb" lunit="mm" x="sr_bot" y="sr_y" z="sr_t"/>
    <box name="sr_sideb" lunit="mm" x="sr_t" y="sr_y" z="sr_side"/>

  </solids>

  <structure>  
    <!-- volumes for lower cover: lowCov_... -->
    <volume name="lowCov_b1_v"> <materialref ref="AL6082T6"/> <solidref ref="lowCov_b1"/> </volume>
    <volume name="lowCov_t1_v"> <materialref ref="AL6082T6"/> <solidref ref="lowCov_t1"/> </volume>
    <volume name="lowCov_b2_v"> <materialref ref="AL6082T6"/> <solidref ref="lowCov_b2"/> </volume>

    <!-- volumes for lower housing: lowHsg_... -->
    <volume name="lowHsg_bxm_v"> <materialref ref="AL6082T6"/> <solidref ref="lowHsg_bxm"/> </volume>
    <volume name="lowHsg_bxp_v"> <materialref ref="AL6082T6"/> <solidref ref="lowHsg_bxp"/> </volume>
    <volume name="lowHsg_bym_v"> <materialref ref="AL6082T6"/> <solidref ref="lowHsg_bym"/> </volume>
    <volume name="lowHsg_byp_v"> <materialref ref="AL6082T6"/> <solidref ref="lowHsg_byp"/> </volume>
    <volume name="lowHsg_blid_v"> <materialref ref="AL6082T6"/> <solidref ref="lowHsg_blid"/> </volume>

    <!-- volumes for lower housing: lowHsg_... -->
    <volume name="dpuBox_bb_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_bb"/> </volume>
    <volume name="dpuBox_sides_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_sides"/> </volume>

    <volume name="dpuBox_bt_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_bt"/> </volume>
    <volume name="dpuBox_ffmm_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_ff"/> </volume>
    <volume name="dpuBox_ffmp_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_ff"/> </volume>
    <volume name="dpuBox_ffpm_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_ff"/> </volume>
    <volume name="dpuBox_ffpp_v"> <materialref ref="AL6082T6"/> <solidref ref="dpuBox_ff"/> </volume>

    <!-- volumes for hopper: hop_... -->
    <volume name="hop_bxm_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_bxm"/> </volume>
    <volume name="hop_bxp_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_bxp"/> </volume>
    <volume name="hop_bym_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_bym"/> </volume>
    <volume name="hop_byp_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_byp"/> </volume>
    <volume name="hop_bzp_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_bzp"/> </volume>
    <volume name="hop_ear1_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ear"/> </volume>
    <volume name="hop_ear2_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ear"/> </volume>
    <volume name="hop_ear3_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ear"/> </volume>
    <volume name="hop_ear4_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ear"/> </volume>
    <volume name="hop_ctl_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ctl"/> </volume>
    <volume name="hop_cts_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_cts"/> </volume>
    <volume name="hop_smsup_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_smsup"/> </volume>
    <volume name="hop_lgsup_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_lgsup"/> </volume>
    <volume name="hop_tfwd_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_tfwd"/> </volume>
    <volume name="hop_tfwcc_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_tfwcc"/> </volume>
    <volume name="hop_tfwsc_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_tfwsc"/> </volume>
    <volume name="hop_ctsb_v"> <materialref ref="AL6082T6"/> <solidref ref="hop_ctsb"/> </volume>
    <volume name="hop_foil_v"> <materialref ref="Kapton"/> <solidref ref="hop_foil"/> </volume>
    <volume name="hop_foilframe_v"> <materialref ref="Kapton"/> <solidref ref="hop_foilframe"/> </volume>

    <volume name="cms_prop_v"> <materialref ref="AL6082T6"/> <solidref ref="cms_prop"/> </volume>
    <volume name="cms_tran_v"> <materialref ref="AL6082T6"/> <solidref ref="cms_tran"/> </volume>
    <volume name="cms_bridge_v"> <materialref ref="AL6082T6"/> <solidref ref="cms_bridge"/> </volume>
    <volume name="cms_keystone_v"> <materialref ref="AL6082T6"/> <solidref ref="cms_keystone"/> </volume>

    <volume name="cmb_sb_v"> <materialref ref="AL6082T6"/> <solidref ref="cmb_sb"/> </volume>
    <volume name="cmb_wcb_v"> <materialref ref="AL6082T6"/> <solidref ref="cmb_wcb"/> </volume>
    <volume name="cmb_ncb_v"> <materialref ref="AL6082T6"/> <solidref ref="cmb_ncb"/> </volume>
    <volume name="cmb_dt_v"> <materialref ref="AL6082T6"/> <solidref ref="cmb_dt"/> </volume>

    <volume name="ssifp_v"> <materialref ref="AL6082T6"/> <solidref ref="ssifp"/> </volume>

    <!-- volumes for wake support -->
    <volume name="ws_base_v"> <materialref ref="AL6082T6"/> <solidref ref="ws_base"/> </volume>
    <volume name="ws_back_v"> <materialref ref="AL6082T6"/> <solidref ref="ws_back"/> </volume>
    <volume name="ws_bot_v"> <materialref ref="AL6082T6"/> <solidref ref="ws_bot"/> </volume>
    <volume name="ws_mid_v"> <materialref ref="AL6082T6"/> <solidref ref="ws_mid"/> </volume>

    <volume name="rs_base_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_base"/> </volume>
    <volume name="rs_scrBox_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_scrBox"/> </volume>
    <volume name="rs_fin1_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_fin1"/> </volume>
    <volume name="rs_fin2_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_fin2"/> </volume>
    <volume name="rs_backa_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_backa"/> </volume>
    <volume name="rs_backb_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_backb"/> </volume>
    <volume name="rs_flapa_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_flapa"/> </volume>
    <volume name="rs_flapb_v"> <materialref ref="AL6082T6"/> <solidref ref="rs_flapb"/> </volume>

    <volume name="sr_botb_v"> <materialref ref="AL6082T6"/> <solidref ref="sr_botb"/> </volume>
    <volume name="sr_sideb_v"> <materialref ref="AL6082T6"/> <solidref ref="sr_sideb"/> </volume>

    <volume name="ramSupport">
      <materialref ref="Vacuum"/>
      <solidref ref="ramSup_mv"/>

      <physvol> <volumeref ref="rs_fin1_v"/> <positionref ref="rs_fin1a_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_fin1_v"/> <positionref ref="rs_fin1b_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_fin2_v"/> <positionref ref="rs_fin2_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_backa_v"/> <positionref ref="rs_backa_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_backb_v"/> <positionref ref="rs_backb_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_flapa_v"/> <positionref ref="rs_flapa_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_flapb_v"/> <positionref ref="rs_flapb_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_base_v"/> <positionref ref="rs_base_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_scrBox_v"/> <positionref ref="rs_scrBox_xmzm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_scrBox_v"/> <positionref ref="rs_scrBox_xpzm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_scrBox_v"/> <positionref ref="rs_scrBox_xmzp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="rs_scrBox_v"/> <positionref ref="rs_scrBox_xpzp_pos"/> <rotationref ref="id"/> </physvol>

      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>


    <volume name="lowCov">
      <materialref ref="Vacuum"/>
      <solidref ref="lowCov_mv"/>

      <physvol> <volumeref ref="lowCov_b1_v"/> <positionref ref="lowCov_b1_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowCov_t1_v"/> <positionref ref="lowCov_t1_pos"/> <rotationref ref="lowCov_t1_rot"/> </physvol>
      <physvol> <volumeref ref="lowCov_b2_v"/> <positionref ref="lowCov_b2_pos"/> <rotationref ref="id"/> </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="lowHsg">
      <materialref ref="Vacuum"/>
      <solidref ref="lowHsg_mv"/>

      <physvol> <volumeref ref="lowHsg_bxm_v"/> <positionref ref="lowHsg_bxm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowHsg_bxp_v"/> <positionref ref="lowHsg_bxp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowHsg_bym_v"/> <positionref ref="lowHsg_bym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowHsg_byp_v"/> <positionref ref="lowHsg_byp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowHsg_blid_v"/> <positionref ref="lowHsg_blid_pos"/> <rotationref ref="id"/> </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="dpuBox">
      <materialref ref="Vacuum"/>
      <solidref ref="dpuBox_mv"/>

      <physvol> <volumeref ref="dpuBox_bb_v"/> <positionref ref="dpuBox_bb_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="dpuBox_sides_v"/> <positionref ref="dpuBox_sides_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="dpuBox_bt_v"/> <positionref ref="dpuBox_bt_pos"/> <rotationref ref="dpuBox_bt_rot"/> </physvol>
      <physvol> <volumeref ref="dpuBox_ffmm_v"/> <positionref ref="dpuBox_ffmm_pos"/> <rotationref ref="dpuBox_ffm_rot"/> </physvol>
      <physvol> <volumeref ref="dpuBox_ffmp_v"/> <positionref ref="dpuBox_ffmp_pos"/> <rotationref ref="dpuBox_ffm_rot"/> </physvol>
      <physvol> <volumeref ref="dpuBox_ffpm_v"/> <positionref ref="dpuBox_ffpm_pos"/> <rotationref ref="dpuBox_ffp_rot"/> </physvol>
      <physvol> <volumeref ref="dpuBox_ffpp_v"/> <positionref ref="dpuBox_ffpp_pos"/> <rotationref ref="dpuBox_ffp_rot"/> </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="hop_box"> 
      <materialref ref="Vacuum"/> 
      <solidref ref="hop_mv1"/>

      <physvol> <volumeref ref="hop_bxm_v"/> <positionref ref="hop_bxm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_bxp_v"/> <positionref ref="hop_bxp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_bym_v"/> <positionref ref="hop_bym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_byp_v"/> <positionref ref="hop_byp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_bzp_v"/> <positionref ref="hop_bzp_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <file name="instrument.gdml"/> <positionref ref="instrument_pos"/> <rotationref ref="id"/> </physvol>
      <!--
      -->

      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    
      <!--
    <volume name="hop_ears"> 
      <materialref ref="Vacuum"/> 
      <solidref ref="hop_mv2"/>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>


    </volume>
      -->

    <volume name="hop_top">
      <materialref ref="Vacuum"/>
      <solidref ref="hop_mv3"/>

      <!-- hop ears -->
      <physvol> <volumeref ref="hop_ear1_v"/> <positionref ref="hop_ear1_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_ear2_v"/> <positionref ref="hop_ear2_pos"/> <rotationref ref="z270"/> </physvol>
      <physvol> <volumeref ref="hop_ear3_v"/> <positionref ref="hop_ear3_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_ear4_v"/> <positionref ref="hop_ear4_pos"/> <rotationref ref="z180"/> </physvol>

      <physvol> <volumeref ref="hop_smsup_v"/> <positionref ref="hop_supxm_pos"/> <rotationref ref="hop_supxm_rot"/> </physvol>
      <physvol> <volumeref ref="hop_smsup_v"/> <positionref ref="hop_supxp_pos"/> <rotationref ref="hop_supxp_rot"/> </physvol>
      <physvol> <volumeref ref="hop_lgsup_v"/> <positionref ref="hop_supym_pos"/> <rotationref ref="hop_supym_rot"/> </physvol>
      <physvol> <volumeref ref="hop_lgsup_v"/> <positionref ref="hop_supyp_pos"/> <rotationref ref="hop_supyp_rot"/> </physvol>

      <physvol> <volumeref ref="hop_foil_v"/> <positionref ref="hop_foil_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_foilframe_v"/> <positionref ref="hop_foilframe_xm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_foilframe_v"/> <positionref ref="hop_foilframe_xp_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_foilframe_v"/> <positionref ref="hop_foilframe_ym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_foilframe_v"/> <positionref ref="hop_foilframe_yp_pos"/> <rotationref ref="id"/> </physvol>
      <!-- end hop ears -->

      <physvol> <volumeref ref="hop_ctl_v"/> <positionref ref="hop_ctlmm_pos"/> <rotationref ref="z180"/> </physvol>
      <physvol> <volumeref ref="hop_ctl_v"/> <positionref ref="hop_ctlmp_pos"/> <rotationref ref="z270"/> </physvol>
      <physvol> <volumeref ref="hop_ctl_v"/> <positionref ref="hop_ctlpm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_ctl_v"/> <positionref ref="hop_ctlpp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_cts_v"/> <positionref ref="hop_ctsmm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_cts_v"/> <positionref ref="hop_ctsmp_pos"/> <rotationref ref="z180"/> </physvol>
      <physvol> <volumeref ref="hop_cts_v"/> <positionref ref="hop_ctspm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_cts_v"/> <positionref ref="hop_ctspp_pos"/> <rotationref ref="z270"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_xmm_pos"/> <rotationref ref="hop_tfwd_xmm_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_xmp_pos"/> <rotationref ref="hop_tfwd_xmp_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_xpm_pos"/> <rotationref ref="hop_tfwd_xpm_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_xpp_pos"/> <rotationref ref="hop_tfwd_xpp_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_ymm_pos"/> <rotationref ref="hop_tfwd_ymm_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_ymp_pos"/> <rotationref ref="hop_tfwd_ymp_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_ypm_pos"/> <rotationref ref="hop_tfwd_ypm_rot"/> </physvol>
      <physvol> <volumeref ref="hop_tfwd_v"/> <positionref ref="hop_tfwd_ypp_pos"/> <rotationref ref="hop_tfwd_ypp_rot"/> </physvol>


      <physvol> <volumeref ref="hop_tfwcc_v"/> <positionref ref="hop_tfwcc_xm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_tfwcc_v"/> <positionref ref="hop_tfwcc_xp_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_tfwcc_v"/> <positionref ref="hop_tfwcc_ym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_tfwcc_v"/> <positionref ref="hop_tfwcc_yp_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="hop_tfwsc_v"/> <positionref ref="hop_tfwsc_xm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_tfwsc_v"/> <positionref ref="hop_tfwsc_xp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_tfwsc_v"/> <positionref ref="hop_tfwsc_ym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_tfwsc_v"/> <positionref ref="hop_tfwsc_yp_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="hop_ctsb_v"/> <positionref ref="hop_ctsbxm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_ctsb_v"/> <positionref ref="hop_ctsbxp_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="hop_ctsb_v"/> <positionref ref="hop_ctsbym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop_ctsb_v"/> <positionref ref="hop_ctsbyp_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="cms_prop_v"/> <positionref ref="cms_prop_xm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cms_prop_v"/> <positionref ref="cms_prop_xp_pos"/> <rotationref ref="z180"/> </physvol>
      <physvol> <volumeref ref="cms_tran_v"/> <positionref ref="cms_tran_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cms_bridge_v"/> <positionref ref="cms_bridge_ym_pos"/> <rotationref ref="cms_bridge_ym_rot"/> </physvol>
      <physvol> <volumeref ref="cms_bridge_v"/> <positionref ref="cms_bridge_yp_pos"/> <rotationref ref="cms_bridge_yp_rot"/> </physvol>
      <physvol> <volumeref ref="cms_keystone_v"/> <positionref ref="cms_keystone_pos"/> <rotationref ref="id"/> </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="codedMask_imp">
      <materialref ref="Vacuum"/>
      <solidref ref="cm_mv"/>
      <physvol> <volumeref ref="cmb_sb_v"/> <positionref ref="cmb_sbxp_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="cmb_sb_v"/> <positionref ref="cmb_sbyp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_sb_v"/> <positionref ref="cmb_sbxm_pos"/> <rotationref ref="z90"/> </physvol>
      <physvol> <volumeref ref="cmb_sb_v"/> <positionref ref="cmb_sbym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_wcb_v"/> <positionref ref="cmb_wcb_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_ncb_v"/> <positionref ref="cmb_ncbpp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_ncb_v"/> <positionref ref="cmb_ncbpm_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_ncb_v"/> <positionref ref="cmb_ncbmp_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="cmb_ncb_v"/> <positionref ref="cmb_ncbmm_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtppp_pos"/> <rotationref ref="cmb_dtppp_rot"/> <scaleref ref="flipZ"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtppm_pos"/> <rotationref ref="cmb_dtppm_rot"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtpmp_pos"/> <rotationref ref="cmb_dtpmp_rot"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtpmm_pos"/> <rotationref ref="cmb_dtpmm_rot"/> <scaleref ref="flipZ"/> </physvol>

      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtmpp_pos"/> <rotationref ref="cmb_dtmpp_rot"/> <scaleref ref="flipZ"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtmpm_pos"/> <rotationref ref="cmb_dtmpm_rot"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtmmp_pos"/> <rotationref ref="cmb_dtmmp_rot"/> </physvol>
      <physvol> <volumeref ref="cmb_dt_v"/> <positionref ref="cmb_dtmmm_pos"/> <rotationref ref="cmb_dtmmm_rot"/> <scaleref ref="flipZ"/> </physvol>

      <physvol> <file name="codedMask.gdml"/> <positionref ref="codedMask_imp_pos"/> <rotationref ref="id"/> </physvol>

      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="wakeSupport">
      <materialref ref="Vacuum"/>
      <solidref ref="ws_mv"/>
      <physvol> <volumeref ref="ws_base_v"/> <positionref ref="ws_base_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ws_back_v"/> <positionref ref="ws_back_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ws_bot_v"/> <positionref ref="ws_bot_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ws_bot_v"/> <positionref ref="ws_top_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ws_mid_v"/> <positionref ref="ws_mid_pos"/> <rotationref ref="id"/> </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
      <!--
      -->
    </volume>

    <volume name="hop">
      <materialref ref="Vacuum"/>
      <solidref ref="hop_mv0"/>

      <physvol> <volumeref ref="hop_box"/> <positionref ref="hop_mv1_pos"/> <rotationref ref="id"/> </physvol>

      <!-- hop_ears no longer used, contents moved to hop_top.
      <physvol> <volumeref ref="hop_ears"/> <positionref ref="hop_mv2_pos"/> <rotationref ref="id"/> </physvol>
      -->

      <physvol> <volumeref ref="hop_top"/> <positionref ref="hop_mv3_pos"/> <rotationref ref="id"/> </physvol>
      <!--
      -->
      <!--
      -->
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
    </volume>

    <volume name="MXGS">
      <materialref ref="Vacuum"/>
      <solidref ref="WorldBox"/>
      <!--
      -->
      <physvol> <volumeref ref="lowCov"/> <positionref ref="lowCov_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="lowHsg"/> <positionref ref="lowHsg_pos"/> <rotationref ref="id"/> </physvol>
      <!--
      -->
      <physvol> <volumeref ref="dpuBox"/> <positionref ref="dpuBox_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="hop"/> <positionref ref="hop_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="codedMask_imp"/> <positionref ref="codedMask_pos"/> <rotationref ref="id"/> </physvol>
      <!--
      -->
      <physvol> <volumeref ref="ssifp_v"/> <positionref ref="ssifp_ym_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ssifp_v"/> <positionref ref="ssifp_yp_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="sr_botb_v"/> <positionref ref="sr_botb_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="sr_sideb_v"/> <positionref ref="sr_sideb_pos"/> <rotationref ref="id"/> </physvol>

      <physvol> <volumeref ref="wakeSupport"/> <positionref ref="ws_pos"/> <rotationref ref="id"/> </physvol>
      <physvol> <volumeref ref="ramSupport"/> <positionref ref="rs_pos"/> <rotationref ref="id"/> </physvol>

      <auxiliary auxtype="visibility" auxvalue="invisible"/>
    </volume>

    <volume name="World">
      <materialref ref="Vacuum"/>
      <solidref ref="WorldBox"/>
      <physvol>
        <volumeref ref="MXGS"/>
        <positionref ref="orig"/>
        <rotationref ref="id"/>
      </physvol>
      <auxiliary auxtype="visibility" auxvalue="invisible"/>
    </volume>

  </structure>
  <setup name="Default" version="1.0">
    <world ref="World"/>
  </setup>
</gdml> 




